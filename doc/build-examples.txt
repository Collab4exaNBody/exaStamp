# Tested with 
# Ubuntu 24.04 , g++-13.4.0 and Cuda 12.8
#
# Note: cofigure exaNBody with EXANB_BUILD_CONTRIB_MD=ON to enable contributed MD potentials
# in exaStamp (i.e ML SNAP)
#
XNB_INSTALL_DIR=${HOME}/local/exaNBody
EXASTAMP_SRC_DIR=${HOME}/dev/exaStamp
EXASTAMP_INSTALL_DIR=${HOME}/local/exaStamp
cmake -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_INSTALL_PREFIX=${EXASTAMP_INSTALL_DIR} \
      -DexaNBody_DIR=${XNB_INSTALL_DIR} \
      ${EXASTAMP_SRC_DIR}

# common build and cleanup
make -j20 install

# first time environment setup so you can use raw executable without wrapper script
source ./exaStamp

# run executable, with or without profiling tools
/home/carrardt/local/onika/bin/onika-exec multi_WBe.msp


# with intel compiler add compiler cmake variables :
# -DCMAKE_CXX_COMPILER=/ccc/products/icx-24.2.0/system/default/24.2.0/bin/icpx -DCMAKE_C_COMPILER=/ccc/products/icx-24.2.0/system/default/24.2.0/bin/icx
